<!DOCTYPE html>
<html lang="en">

<head>
    <% include ../partials/head.ejs %>
    <script src="/javascripts/user.js" type="text/javascript"></script>
</head>

<body>
    <div id="wrap">
        <% include ../partials/header.ejs %>
            <div class="container">
                <div class="alert alert-success"></div>
                      <div class="row">
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <div class="row list-group">
                                    <div class="col-xs-12 list-group-item">
                                        <h3>Users<a href="/user/create" class="add-link">+</a></h3>
                                        <table class="table table-bordered table-striped">
                                            <thead>
                                                <tr>
                                                    <th>Username</th>
                                                    <th>Name</th>
                                                    <th>Role</th>
                                                    <th>Login Attempts</th>
                                                    <th>Locked Until</th>
                                                    <th>Disabled</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <% users.forEach( function( user ){ %>
                                                    <tr>
                                                        <td>
                                                            <%=user.email%>
                                                        </td>
                                                        <td>
                                                            <%=user.last_name%>,
                                                                <%=user.first_name%>
                                                        </td>
                                                        <td>
                                                            <%=user.role%>
                                                        </td>
                                                        <td>
                                                            <%=user.login_attempts%>
                                                        </td>
                                                        <td>
                                                            <%=user.lock_until%>
                                                        </td>
                                                        <td>
                                                            <%=user.disabled%>
                                                        </td>
                                                        <td>
                                                             <button type="button" class="btn btn-danger del-user" data-toggle="modal" 
                                                                     id="<%=user.id%>" data-target="#myModal">Delete</button>
                                                             <a href="/user/update/<%=user.id%>" class="btn btn-primary" role=" button">Edit</a>
                                                        </td>
                                                    </tr>
                                                    <% }); %>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Modal -->
                        <div class="modal fade" id="myModal" role="dialog">
                            <div class="modal-dialog">

                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        <h4 class="modal-title">Delete User?</h4>
                                    </div>
                                    <div class="modal-body">
                                        <p>Are you sure you want to delete this user?</p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal" id="conf-delete" value="">Yes</button>
                                        <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
                                    </div>
                                </div>

                            </div>
                        </div>

            </div>



            <div id="push"></div>
    </div>



    <% include ../partials/footer.ejs %>
</body>

</html>